var app=angular.module("myapp",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider",function(e,o){o.otherwise("/index"),e.state("index",{url:"/index",templateUrl:"view/box.html",controller:"boxController"}).state("programColumn",{url:"/programColumn",templateUrl:"view/programColumn.html",controller:"programColumnController"}).state("community",{url:"/community",templateUrl:"view/community.html",controller:"communityController"}).state("login",{url:"/login",templateUrl:"view/login.html",controller:"loginController"}).state("register",{url:"/register",templateUrl:"view/register.html",controller:"registerController"}).state("forgetPassword",{url:"/forgetPassword",templateUrl:"view/forgetPassword.html",controller:"forgetPasswordController"}).state("programList",{url:"/programList",templateUrl:"view/programList.html",controller:"programListController"}).state("programDetails",{url:"/programDetails/:name",templateUrl:"view/programDetails.html",controller:"programDetailsController"}).state("programDetails.expline",{url:"/programDetails.expline",templateUrl:"view/programDetailsExpline.html"}).state("payment",{url:"/payment",templateUrl:"view/payment.html",controller:"paymentController"}).state("payment.toSure",{url:"/payment.toSure/:name/:money",templateUrl:"view/paymentToSure.html",controller:"paymentToSureController"}).state("payment.toPay",{url:"/payment.toPay/:name/:money",templateUrl:"view/paymentToPay.html",controller:"paymentToPayController"}).state("payment.paySure",{url:"/payment.paySure",templateUrl:"view/paymentpaySure.html",controller:"paymentPaySureController"}).state("personal",{url:"/personal",templateUrl:"view/personal.html",controller:"personalController"}).state("personal.homepage",{url:"/homepage",templateUrl:"view/personalHomepage.html",controller:"personalHomepageController"}).state("personal.information",{url:"/information",templateUrl:"view/personalInformation.html",controller:"personalInformationController"}).state("personal.security",{url:"/security",templateUrl:"view/personalSecurity.html",controller:"personalSecurityController"}).state("personal.circles",{url:"/circles",templateUrl:"view/personalCircles.html"}).state("personal.purchaseHistory",{url:"/purchaseHistory",templateUrl:"view/personalPurchaseHistory.html",controller:"personalPurchaseHistoryController"})}]),app.controller("indexController",["$scope","$rootScope",function(e,o){o.showa=0}]),app.controller("boxController",["$scope","$interval","$http",function(e,o,t){function n(){e.showIndex++,2==e.showIndex&&(e.showIndex=0)}e.imgList=[{src:"./images/indexbg1.jpg",name:"《犹太人在上海》音乐剧"},{src:"./images/indexbg2.png",name:"《晚秋》再现舞台"}],e.showIndex=0,e.timer=o(n,2500),e.clickFn=function(t){o.cancel(e.timer),0==t?(e.showIndex--,e.showIndex<0&&(e.showIndex=1)):(e.showIndex++,2==e.showIndex&&(e.showIndex=0)),e.timer=o(n,2500)},e.itemList=["微电影","电影","电视剧","传统戏曲","话剧","书画","相声","戏剧","音乐剧","纪录片"],e.conts=4,e.showIndexs=0,e.mouseoverFn=function(o){e.conts=o,e.showIndexs=o%6},t({url:"json/box.json",method:"get"}).success(function(o){e.information=o})}]),app.controller("communityController",["$scope","$timeout",function(e,o){e.shows=1,o(function(){e.shows=0},2e3)}]),app.controller("forgetPasswordController",["$scope","$interval","$rootScope","$state",function(e,o,t,n){t.showa=9,e.getkeys="发送验证码",e.pushKey=function(){var t=60;o(function(){if(t>=0?e.getkeys="已发送，"+t--+"秒后重发":e.getkeys="发送验证码",0==t){var o=Math.floor(1e4*Math.random());o>999?e.keywords=o:o=Math.floor(1e4*Math.random())}},1e3,62)},e.nextState=function(e){1==e&&n.go("login")}}]),app.controller("loginController",["$scope","$rootScope","$state",function(e,o,t){o.showa=9,e.showspan=0,e.spanBgFn=function(){e.showspan=0==e.showspan?1:0},e.toUser=function(e){1==e&&t.go("personal.homepage")}}]),app.controller("paymentController",["$scope","$rootScope",function(e,o){o.name="",o.money=0,o.payState=0,e.paycess=function(e){o.payState=e}}]),app.controller("paymentPaySureController",["$scope","$rootScope",function(e,o){o.payState=2,e.review=0,e.clickReview=function(o){e.review=o}}]),app.controller("paymentToPayController",["$scope","$rootScope","$stateParams",function(e,o,t){o.name=t.name,o.money=t.money,o.payState=1,e.selsetNum=1,e.selectBank=function(o){e.selsetNum=o},e.banks=[{img:"images/bankOfChina.png"},{img:"images/constructionBankOfChina.png"},{img:"images/CIB.png"},{img:"images/CMBC.png"},{img:"images/bankOfChina.png"},{img:"images/constructionBankOfChina.png"},{img:"images/CIB.png"},{img:"images/CMBC.png"},{img:"images/bankOfChina.png"},{img:"images/constructionBankOfChina.png"},{img:"images/CIB.png"},{img:"images/CMBC.png"},{img:"images/bankOfChina.png"},{img:"images/constructionBankOfChina.png"},{img:"images/CIB.png"},{img:"images/CMBC.png"},{img:"images/constructionBankOfChina.png"},{img:"images/CIB.png"},{img:"images/CMBC.png"}],e.clicked=0,e.toSelect=function(o){e.clicked=o}}]),app.controller("paymentToSureController",["$scope","$rootScope","$stateParams","$rootScope","$http",function(e,o,t,o,n){o.payState=0,o.name=t.name,o.money=t.money,console.log(o.money),n({url:"json/"+o.name+".json",method:"get"}).success(function(o){e.pays=o})}]),app.controller("personalController",["$scope",function(e){e.timeHello="",e.data=new Date,e.hour=e.data.getHours(),e.hour<6||(e.hour<9?e.timeHello="早上好！":e.hour<12?e.timeHello="上午好！":e.hour<14?e.timeHello="中午好！":e.hour<17?e.timeHello="下午好！":e.hour<19?e.timeHello="傍晚好！":e.hour<22?e.timeHello="晚上好！":e.timeHello="夜里好！"),e.classs=70,e.classs<60?e.personalClass="低":e.classs<85?e.personalClass="中":e.personalClass="高"}]),app.controller("personalHomepageController",["$scope","$http",function(e,o){o({url:"json/box.json",method:"get"}).success(function(o){e.personalLis=o})}]),app.controller("personalInformationController",["$scope",function(e){e.checkBox=["微电影","电影","电视剧","戏曲","相声","话剧","书画","戏剧","音乐剧","歌剧"],e.circles=[],e.circles[0]=!0,e.circles[8]=!0,e.selectCircle=function(o){e.circles[o]=!e.circles[o]}}]),app.controller("personalPurchaseHistoryController",["$scope","$http","$state",function(e,o,t){e.count=0,e.states="",e.clickFn=function(o){e.count=o,e.states=0==o?"":1==o?{state:0}:{state:1}},e.listname=["项目信息","实付款(元)","交易状态","操作"],o({url:"json/box.json",method:"get"}).success(function(o){e.myInformation=o,e.remove=function(o){for(var t=0;t<e.myInformation.length;t++)e.myInformation[t].name==o&&e.myInformation.splice(t,1)}}),e.topay=function(e,o){t.go("payment.toSure",{name:e,money:o})}}]),app.controller("personalSecurityController",["$scope","$interval",function(e,o){e.activeSpan=0,e.selectClick=function(o){e.activeSpan=o},e.getkey="免费获取验证码",e.getKeyNumber=function(){e.num=10;var t=Math.floor(1e4*Math.random());t<=999&&(t+=1e3),o(function(){e.getkey=e.num+"秒后重新获取",e.num--,e.num<0&&(e.num=10,e.getkey="获取验证码",e.keyNumber=t)},1e3,11)},e.input1=!1,e.input2=!1,e.input3=!1,e.promptFn=function(){e.input1=!0},e.promptFn1=function(){e.input2=!0},e.promptFn2=function(){e.input3=!0},e.keywords="",e.clickBtn="发送验证码",e.getKeyWords=function(){e.nums=10;var t=Math.floor(1e4*Math.random());t<=999&&(t+=1e3),o(function(){e.clickBtn=e.nums+"秒后重新获取",e.nums--,e.nums<0&&(e.nums=10,e.clickBtn="获取验证码",e.keywords=t)},1e3,11)}}]),app.controller("programColumnController",["$scope","$timeout",function(e,o){e.shows=1,o(function(){e.shows=0},2e3)}]),app.controller("programDetailsController",["$scope","$stateParams","$http","$state",function(e,o,t,n){n.go("programDetails.expline"),e.name=o.name,t({url:"json/"+e.name+".json",method:"get"}).success(function(o){e.information=o}),e.actSpan=0,e.cilkFn=function(o){e.actSpan=o}}]),app.controller("programListController",["$scope","$rootScope","$http",function(e,o,t){o.showa=9,e.itemList=["全部","微电影","电影","电视剧","传统戏曲","话剧","书画","相声","戏剧","音乐剧","纪录片"],e.states=["筹资中","即将结束","已成功"],e.hotTop=["最新","热门","结束时间"],e.showSpan1=0,e.showSpan2=2,e.showSpan3=0,e.showList="",e.showState="",e.itemClFn=function(o){e.showSpan1=o,0!=o?e.showList={type:e.itemList[o]}:(e.showList="",e.showState=""),setTimeout(function(){console.log(document.getElementsByClassName("pushMove").length)},30)},e.staClFn=function(o){e.showSpan2=o,e.showState={stute:e.states[o]}},e.hotClFn=function(o){e.showSpan3=o},t({url:"json/box.json",method:"get"}).success(function(o){e.information=o})}]),app.controller("registerController",["$scope","$interval","$rootScope","$state",function(e,o,t,n){t.showa=9,e.getkey="获取验证码",e.pushKey=function(){var t=(document.getElementsByTagName("button")[0],10);o(function(){if(t--,t>0?e.getkey="已发送，"+t+"秒后重发":e.getkey="发送验证码",0==t){var o=Math.floor(1e4*Math.random());o>999?e.keywords=o:o=Math.floor(1e4*Math.random())}},1e3,10)},e.showspan=0,e.spanBgFn=function(){e.showspan=0==e.showspan?1:0},e.goToLogin=function(e){1==e&&n.go("login")}}]);
